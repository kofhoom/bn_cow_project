<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="/_css/common.css">
  <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
</head>

<body>
  <div id="div-header"></div>
  <div class="wrap sign-up">
    <!-- 상세 타이틀 시작 -->
    <div class="common__info-title-wrap">
      <h1 class="common__info-title">
        마이페이지
      </h1>
    </div>
    <!-- 상세 타이틀 끝 -->
    <!-- 상세 페이지 맵 리스트 시작-->
    <div class="common__page-map-wrap">
      <ul>
        <li class="common__map-list">회원정보 수정</li>
        <li class="common__map-list">&middot;</li>
        <li class="common__map-list">내가 쓴 글 보기</li>
        <li class="common__map-list">&middot;</li>
        <li class="common__map-list">스크랩</li>
        <li class="common__map-list">&middot;</li>
        <li class="common__map-list">회원탈퇴</li>
      </ul>
    </div>
    <!-- 상세 페이지 맵 리스트 끝-->
    <!-- 상세 컨텐츠 시작 -->
    <section class="common__content mt40">
      <div class="form__wrap">
        <!-- 폼 영역 시작 -->
        <form class="common__form" action="/subpage/member/private_join_check.php" enctype="multipart/form-data"
          method="post" name="join_form" id="join_form" onsubmit="return form_submit();">
          <fieldset>
            <div class="common__fieldset-inner">
              <!-- 이름 영역 시작-->
              <div class="common-input__wrap">
                <!-- 라벨 영역 시작 -->
                <div class="common-box__label">
                  <label>
                    이름
                  </label>
                </div>
                <!-- 라벨 영역 끝 -->
                <!-- 인풋 영역 시작 -->
                <div class="common-box__input">
                  <div class="input__inner">
                    <span class="content__list-text">홍길동</span>
                  </div>
                  <span class="input-error__message user_name"></span>
                </div>
                <!-- 인풋 영역 끝 -->
              </div>
              <!-- 이름 영역 끝-->
              <!-- 생년월일 영역 시작-->
              <div class="common-input__wrap">
                <!-- 라벨 영역 시작 -->
                <div class="common-box__label">
                  <label>
                    생년월일
                  </label>
                </div>
                <!-- 라벨 영역 끝 -->
                <!-- 인풋 영역 시작 -->
                <div class="common-box__input">
                  <div class="input__inner">
                    <span class="content__list-text">990930</span>
                  </div>
                  <span class="input-error__message user_date"></span>
                </div>
                <!-- 인풋 영역 끝 -->
              </div>
              <!-- 생년월일 영역 끝-->
              <!-- 성별 영역 시작-->
              <div class="common-input__wrap">
                <!-- 라벨 영역 시작 -->
                <div class="common-box__label">
                  <label>성별
                  </label>
                </div>
                <!-- 라벨 영역 끝 -->
                <!-- 인풋 영역 시작 -->
                <div class="common-box__input">
                  <div class="input__inner">
                    <span class="content__list-text">남자</span>
                  </div>
                  <span class="input-error__message gender_check"></span>
                </div>
                <!-- 인풋 영역 시작 -->
              </div>
              <!-- 성별 영역 끝-->
              <!-- 수의사면허번호 영역 시작-->
              <div class="common-input__wrap">
                <!-- 라벨 영역 시작 -->
                <div class="common-box__label">
                  <label>수의사면허번호
                  </label>
                </div>
                <!-- 라벨 영역 끝 -->
                <!-- 인풋 영역 시작 -->
                <div class="common-box__input">
                  <div class="input__inner">
                    <input type="text" id="license_number" name="license_number" maxlength="11"
                      oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" />
                  </div>
                  <span class="input-error__message license_number"></span>
                </div>
                <!-- 인풋 영역 끝 -->
              </div>
              <!-- 수의사면허번호 영역 끝-->
              <!-- 휴대전화번호 영역 시작-->
              <div class="common-input__wrap">
                <!-- 라벨 영역 시작 -->
                <div class="common-box__label">
                  <label>휴대전화번호
                  </label>
                </div>
                <!-- 라벨 영역 끝 -->
                <!-- 인풋 영역 시작 -->
                <div class="common-box__input">
                  <div class="input__inner">
                    <input type="text" id="insert_tel" name="insert_tel" maxlength="11"
                      oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" />
                  </div>
                  <span class="input-error__message insert_tel"></span>
                </div>
                <!-- 인풋 영역 끝 -->
              </div>
              <!-- 휴대전화번호 영역 끝-->
              <!-- 이메일 시작-->
              <div class="common-input__wrap">
                <!-- 라벨 영역 시작 -->
                <div class="common-box__label">
                  <label>이메일</label>
                </div>
                <!-- 라벨 영역 끝 -->
                <!-- 인풋 영역 시작 -->
                <div class="common-box__input">
                  <div class="input__inner email">
                    <input type="text" id="email1" name="email1" />
                    <span class="dot">@</span>
                    <input type="text" id="email2" name="email2" />
                    <select class="email-type__select ml5" name="user_email3" id="user_email3"
                      onchange="emailTypeSelect()">
                      <option value="w">직접입력</option>
                      <option value="naver.com">naver.com</option>
                      <option value="daum.net">daum.net</option>
                      <option value="google.com">google.com</option>
                      <option value="nate.com">nate.com</option>
                    </select>
                  </div>
                  <span class="input-error__message email1 email2"></span>
                </div>
                <!-- 인풋 영역 끝 -->
              </div>
              <!-- 이메일 끝-->
            </div>
          </fieldset>
          <fieldset>
            <div class="common__fieldset-inner">
              <!-- 예금주 영역 시작-->
              <p class="title">※ 회비 납부 은행 정보</p>
              <div class="common-input__wrap">
                <div class="common-box__label">
                  <!-- 라벨 영역 시작 -->
                  <label>예금주
                  </label>
                  <!-- 라벨 영역 끝 -->
                </div>
                <!-- 인풋 영역 시작 -->
                <div class="common-box__input">
                  <div class="input__inner">
                    <input type="text" id="account_holder" name="account_holder" />
                  </div>
                  <span class="input-error__message account_holder"></span>
                </div>
                <!-- 인풋 영역 끝 -->
              </div>
              <!-- 예금주 영역 끝-->
              <!-- 계좌번호 시작-->
              <div class="common-input__wrap">
                <!-- 라벨 영역 시작 -->
                <div class="common-box__label">
                  <label>계좌번호</label>
                </div>
                <!-- 라벨 영역 끝 -->
                <!-- 인풋 영역 시작 -->
                <div class="common-box__input">
                  <div class="input__inner bank-account">
                    <input type="text" name="bank_account_name" id="bank_account_name" placeholder="은행명" />
                    <input type="text" name="bank_account_number" id="bank_account_number"
                      oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" />
                  </div>
                  <span class="input-error__message bank_account_name bank_account_number"></span>
                </div>
                <!-- 인풋 영역 끝 -->
              </div>
              <!-- 계좌번호 끝-->
            </div>
          </fieldset>
          <fieldset>
            <div class="common__fieldset-inner">
              <!-- 기관명(병원명) 영역 시작-->
              <div class="common-input__wrap">
                <div class="common-box__label">
                  <!-- 라벨 영역 시작 -->
                  <label>기관명(병원명)
                  </label>
                  <!-- 라벨 영역 끝 -->
                </div>
                <!-- 인풋 영역 시작 -->
                <div class="common-box__input">
                  <div class="input__inner">
                    <input type="text" id="hospital_name" name="hospital_name" autocomplete="hospital_name" />
                  </div>
                  <span class="input-error__message hospital_name"></span>
                </div>
                <!-- 인풋 영역 끝 -->
              </div>
              <!-- 기관명(병원명) 영역 끝-->
              <!-- 직장주소 영역 시작-->
              <div class="common-input__wrap">
                <!-- 라벨 영역 시작 -->
                <div class="common-box__label">
                  <label>직장주소
                  </label>
                </div>
                <!-- 라벨 영역 끝 -->
                <!-- 인풋 영역 시작 -->
                <div class="common-box__input address">
                  <div class="input__inner">
                    <input type="text" name="zipcode" id="zipcode" />
                    <input type="text" name="address1" id="address1" placeholder="기본주소" />
                    <input type="text" name="address2" id="address2" placeholder="상세주소" />
                  </div>
                  <!-- 주소 검색 버튼 시작 -->
                  <div class="input-box__button">
                    <button class="common__btn-small" id="search_add">주소 검색</button>
                  </div>
                  <!-- 주소 검색 버튼 끝 -->
                  <span class="input-error__message zipcode address1 address2"></span>
                </div>
                <!-- 인풋 영역 끝 -->
              </div>
              <!-- 직장주소 끝-->
              <!-- 직책명 영역 시작-->
              <div class="common-input__wrap">
                <div class="common-box__label">
                  <!-- 라벨 영역 시작 -->
                  <label>직책명
                  </label>
                  <!-- 라벨 영역 끝 -->
                </div>
                <!-- 인풋 영역 시작 -->
                <div class="common-box__input">
                  <div class="input__inner">
                    <input type="text" id="position_name" name="position_name" autocomplete="position_name" />
                  </div>
                  <span class="input-error__message position_name"></span>
                </div>
                <!-- 인풋 영역 끝 -->
              </div>
              <!-- 직책명 영역 끝-->
              <!-- 진료 축종 영역 시작-->
              <div class="common-input__wrap">
                <!-- 라벨 영역 시작 -->
                <div class="common-box__label">
                  <label>
                    진료 축종
                  </label>
                </div>
                <!-- 라벨 영역 끝 -->
                <!-- 인풋 영역 시작 -->
                <div class="common-box__input">
                  <div class="input__inner radio">
                    <div class="comments__choose-radio-list">
                      <label for="animal_check1">
                        <input type="radio" id="animal_check1" class="animal-check__radio" name="animal_check"
                          value="한우" />
                        <span>한우</span>
                      </label>
                      <label for="animal_check2">
                        <input type="radio" id="animal_check2" class="animal-check__radio" name="animal_check"
                          value="젖소" />
                        <span>젖소</span>
                      </label>
                      <label for="animal_check3">
                        <input type="radio" id="animal_check3" class="animal-check__radio" name="animal_check"
                          value="말" />
                        <span>말</span>
                      </label>
                      <label for="animal_check4">
                        <input type="radio" id="animal_check4" class="animal-check__radio" name="animal_check"
                          value="염소" />
                        <span>염소</span>
                      </label>
                      <label for="animal_check5">
                        <input type="radio" id="animal_check5" class="animal-check__radio" name="animal_check"
                          value="사슴" />
                        <span>사슴</span>
                      </label>
                      <label for="animal_check6">
                        <input type="radio" id="animal_check6" class="animal-check__radio" name="animal_check"
                          value="반려동물(개,고양이,특수동물 등)" />
                        <span>반려동물(개,고양이,특수동물 등)</span>
                      </label>
                      <label for="animal_check7">
                        <input type="radio" id="animal_check7" class="animal-check__radio" name="animal_check"
                          value="기타(개원 예정 등)" />
                        <span>기타(개원 예정 등)</span>
                      </label>
                    </div>
                  </div>
                  <span class="input-error__message animal_check"></span>
                </div>
                <!-- 인풋 영역 시작 -->
              </div>
              <!-- 진료 축종 영역 끝-->
            </div>
          </fieldset>
          <!-- 가입신청 버튼 시작 -->
          <div class="common__edit-list survey">
            <input type="submit" class="submit__btn" value="수정" />
          </div>
          <!-- 가입신청 버튼 끝 -->
        </form>
        <!-- 폼 영역 끝 -->
      </div>
    </section>
    <!-- 상세 컨텐츠 끝 -->
  </div>

  <div id="div-footer"></div>

  <script defer>
    async function load() {
      let jsComponent = await import("/_js/fetch.js");
      jsComponent.headerLayout();
      jsComponent.footerLayout();
    }
    load();
  </script>
  <script>
    /*******************************************************************
    // 설명 : 공통정의 함수
    ********************************************************************/

    /**
     * 비밀번호 유효성 오류 텍스트
     * @param {DomClass} targetClass
     * @param {String} message 에러 메시지
     */

    const errorText = (targetClass, message) =>
      (document.querySelector(`.${targetClass}`).innerHTML = message);

    /**
     * 성별 선택 유효성
     * @param {name} rName radio name
     * @returns radio에 체크벨류값
     */

    const radioCheck = (rName) => {
      let radioArr = '';
      radioArr = document.getElementsByName(rName);
      console.log(radioArr)
      for (i = 0; i < radioArr.length; i++) {
        if (radioArr[i].checked) {
          radioValue = radioArr[i].value;

          return radioValue;
        }
      }
    };

    /**
     * 인풋 벨류 초기화 함수
     * @param {String} errorTextDomName valueReset로 부터 전달받은 메개변수
     */
    const eventBindValue = (errorTextDomName) => {
      const elTargets = document.querySelector(`.${errorTextDomName}`)
      if (event.target.value.length > 0) {
        elTargets.innerHTML = "";
        return
      }
      elTargets.innerHTML = "";
    }

    /**
     * 벨류 초기화 공통 함수
     * @param {String} targetName 초기화될 해당 에러 문구 이름
     */
    const valueReset = (targetName, radioTarget) => {
      inputs = document.getElementById(targetName) || document.getElementsByName(targetName)[0];
      switch (inputs.type) {
        case 'text':
          inputs.setAttribute("onkeyup", "eventBindValue('" + targetName + "')");
          break;
        case 'radio':
          let radioArrays = document.querySelectorAll(`.${radioTarget}`);
          for (i = 0; i < radioArrays.length; i++) {
            radioArrays[i].addEventListener("click", () => {
              if (event.target.value == "on") {
                eventBindValue(targetName)
              }
            });
          }
          break;
        case 'select-one':
          inputs.addEventListener('change', () => {
            if (event.target.value !== 'd') {
              eventBindValue(targetName)
            }
          })
      }
    };

    /**
     * 종합 문자열 유효성 체크
     * @param {String} str input에 value
     * @param {String} type 해당 문자의 타입
     * @returns {Boolean}
     */
    const strCheck = (str, type) => {
      let REGEX = {
        EMAIL: /^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i,
        ID_RULE: /^[a-z0-9_-]{5,15}$/,
        PWD_RULE: /^(?=.*[a-zA-Z])((?=.*\d)(?=.*\W)).{8,16}$/,
        NAME_RULE: /^[가-힣a-zA-Z]+$/,
      };

      if (type === "email") return REGEX.EMAIL.test(str);
      else if (type === "id") return REGEX.ID_RULE.test(str);
      else if (type === "pwd") return REGEX.PWD_RULE.test(str);
      else if (type === "name") return REGEX.NAME_RULE.test(str);
      else return false;
    }

    // 폼 submit 함수
    function form_submit() {
      let form = document.join_form;
      let flag = true; // submit 기능 활성화 or 비활성화 상태 설정

      event.preventDefault();


      // 수의사면허번호
      if (!form.license_number.value) {
        alert("수의사면허번호를 입력해주세요.");
        errorText("license_number", "수의사면허번호를 입력해주세요.");
        form.license_number.focus();
        valueReset("license_number");

        return false;
      }

      // 휴대전화번호
      if (!form.insert_tel.value) {
        alert("휴대전화번호를 입력해주세요.");
        errorText("insert_tel", "휴대전화번호를 입력해주세요.");
        form.insert_tel.focus();
        valueReset("insert_tel");

        return false;
      }
      // 이메일
      if (!form.email1.value) {
        alert("이메일을 입력해주세요.");
        form.email1.focus();
        errorText("email1", "이메일을 입력 해주세요.");
        valueReset("email1");

        return false;
      }

      // 이메일 상세
      if (!form.email2.value) {
        alert("이메일 상세를 입력해주세요.");
        form.email2.focus();
        errorText("email2", "이메일 상세를 입력 해주세요.");
        valueReset("email2");

        return false;
      }

      // 예금주
      if (!form.account_holder.value) {
        alert("예금주를 입력해주세요.");
        errorText("account_holder", "예금주를 입력해주세요.");
        form.account_holder.focus();
        valueReset("account_holder");

        return false;
      }
      // 은행명
      if (!form.bank_account_name.value) {
        alert("은행명을 입력해주세요.");
        errorText("bank_account_name", "은행명을 입력해주세요.");
        form.bank_account_name.focus();
        valueReset("bank_account_name");

        return false;
      }
      // 계좌번호
      if (!form.bank_account_number.value) {
        alert("계좌번호를 입력해주세요.");
        errorText("bank_account_number", "계좌번호를 입력해주세요.");
        form.bank_account_number.focus();
        valueReset("bank_account_number");

        return false;
      }
      // 기관명(병원명)
      if (!form.hospital_name.value) {
        alert("기관명을 입력해주세요.");
        errorText("hospital_name", "기관명을 입력해주세요.");
        form.hospital_name.focus();
        valueReset("hospital_name");

        return false;
      }

      // 우편번호
      if (!form.zipcode.value) {
        alert("우편번호를 입력 해주세요.");
        errorText("zipcode", "우편번호를 입력 해주세요.");
        form.zipcode.focus();
        valueReset("zipcode");

        return false;
      }

      // 주소
      if (!form.address1.value) {
        alert("주소를 입력 해주세요.");
        errorText("address1", "주소를 입력 해주세요.");
        form.address1.focus();
        valueReset("address1");

        return false;
      }

      // 상세주소
      if (!form.address2.value) {
        alert("상세주소를 입력 해주세요.");
        errorText("address2", "상세주소를 입력 해주세요.");
        form.address2.focus();
        valueReset("address2");

        return false;
      }
      // 직책명
      if (!form.position_name.value) {
        alert("직책명을 입력해주세요.");
        errorText("position_name", "직책명을 입력해주세요.");
        form.position_name.focus();
        valueReset("position_name");

        return false;
      }
      // 진료 축종
      if (radioCheck("animal_check") == undefined) {
        alert("진료 축종을 선택 해주세요.");
        errorText("animal_check", "진료 축종을 선택 해주세요.");
        form.animal_check[0].focus();
        valueReset("animal_check", 'animal-check__radio');

        return false;
      }

      if (flag == true) {
        console.log(
          "수정이 완료되었습니다.\n" +
          `이름: ${form.user_name.value}\n
          생년월일: ${form.user_date.value}\n
          성별: ${form.gender_check.value}\n
          수의사면허번호: ${form.license_number.value}\n
          휴대전화번호: ${form.insert_tel.value}\n
          이메일: ${form.email1.value}\n
          이메일 상세: ${form.email2.value}\n
          예금주: ${form.account_holder.value}\n
          은행명: ${form.bank_account_name.value}\n
          계좌번호: ${form.bank_account_number.value}\n
          기관명(병원명): ${form.hospital_name.value}\n
          우편번호: ${form.zipcode.value}\n
          주소: ${form.address1.value}\n
          상세주소: ${form.address2.value}\n
          직책명: ${form.position_name.value}\n
          진료 축종: ${form.animal_check.value}\n
          `
        );

        form.submit();

      }
    }

    // 이메일 입력선택
    function emailTypeSelect() {
      let form = document.join_form;

      if (form.user_email3.value == "w") {
        form.email2.readOnly = false;
        form.email2.value = "";
        form.email2.focus();
      } else if (form.user_email3.value == "b") {
        form.email2.readOnly = true;
        form.email2.value = "";
      } else {
        form.email2.readOnly = true;
        form.email2.value = form.user_email3.value;
      }
    }

    // 주소검색
    window.onload = function () {
      document.getElementById("search_add").addEventListener("click", function () {
        event.preventDefault();
        //주소 찾기 버튼을 클릭하면 주소 api 모달창 open
        new daum.Postcode({
          oncomplete: function (data) {
            //선택시 입력값 세팅
            document.getElementById("zipcode").value = data.zonecode;
            document.getElementById("address1").value = data.address;
            document.querySelector("input[id=address2]").focus();
          },
        }).open();
      });
    };
  </script>
</body>

</html>